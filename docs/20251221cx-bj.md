我想把pdf_to_anki中的pdf_to_anki\src中的pdf转为知识点的这个功能移植到这个99AI-ANKI中，首先这个功能有3个，pdf_to_anki\src\API_README.md中已经定义好了，1.生成笔记2.生成anki卡片3.重置某页重新生成笔记。我想把这三个作为单独的功能，首先加第一个生成笔记的功能，其他的不要管，专心这一个。（这个功能当前使用了2个模型，gpt-5-mini和gemini-3-pro-preview，之后可能第1，2，4，7步的模型需要修改，也就是说可能用其他的在admin中配置的模型）
首先在chat端，我希望这个（生成笔记）功能是类似于“图表”，“联网”，“深度思考”按钮（准备个小图标），选中后左上角默认不选模型，与左上角的模型无关，注意点击后和取消点击的交互。用户需要选择知识库中的一个文档，选择生成笔记的范围（当前不可修改默认为所有页）。用户点击发送后这个应该是一个异步的任务，因为时间比较长，可能是几分钟或者几小时都有可能，所以应该用户有个进度条一样（等待动画，一共6步，每个占16.6%，不要告诉用户处理阶段在做什么数字进度条就行，可以显示让用户让用户做其他的事，完成了会通知的）的等待笔记完成，用户可以点击刷新查看最新进度，还有当前消耗的普通点数(计费的按照99AI在admin中配置的模型名称对应的来计费)，还有预计这个文档需要消耗的普通点数（假设100页50-100点），不点就默认一分钟更新一下。（用户可以退出这个界面或者开个新对话都不影响当前的笔记生成），如果生成失败，比如用户点数不够，或者是服务器的失败，都可以告诉用户这个不影响，因为是可以断点续传的，保证了用户点数不会被浪费。还有就是不允许中断任务。生成笔记完成后，用户可以下载笔记，ai给用户2个对话框，每个对话框里面是笔记的1个文件(markdown-markmap，word)，单击即可下载.让用户自己选择。
对于admin管理端，我需要把关于这个生成笔记的功能，1.加个配置，加在当前的模型管理那栏，加个二级的目录，叫笔记生成配置。配置的内容，参考pdf_to_anki\src\.env中的关于笔记生成步骤的选项（1，2，3，4，5，8步）。2.加个：数据管理/笔记管理，里面记录用户id，生成笔记pdf，配置，消耗点数，不同步骤使用的模型，模型最后消耗的token统计，服务商成本（比如gpt-5-mini消耗20.2M，gemini-3-pro-preview消耗10.1M，上游成本，这个我在pdf_to_anki\src\LLMClient.py中有记录），处理状态（创建，处理中，完成，未完成），处理的笔记结果。
对于后端，我希望你能好好设计一下API的请求（当前的太简单，需要优化一下，还没有匹配99ai的Auth验证），数据库，能满足我chat端和admin管理端的要求。
还有是处理部分，首先从cos中下载处理的pdf，然后读取数据库（因为这个数据库记录了这个pdf是否有生成过的笔记，有的话就能直接下载复用,因为生成笔记的不同步骤是可以断点续传的），处理的用户在服务器端会有一个用户文件夹，参考知识库的部分，是怎么在cos中存储用户的pdf的,然后笔记处理的中间内容和结果都存在这里（用户的.pdf所在的那层文件夹），最后这些笔记处理的中间内容和结果也按照处理的层次上传到用户的知识库的cos中，也就是说用户的知识库cos除了存用户的pdf，还要存用户的pdf处理的内容和产生的笔记，这个在用户端不显示）。对没有处理完的中断的，状态为未完成的，那也上传到用户的cos。对于处理完的任务，待所有的内容上传到cos，可以记录一下用户的处理pdf文件夹，处理的状态存在数据库，是否处理完成，处理完成时间，是否上传到cos。每隔7天，自动删除已完成的任务的pdf和处理文件夹，上传到cos的用户文件夹，当前7天内的处理中的和未完成的不受影响。